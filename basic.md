
작성자 : 이민우<br>
작성일 : 2020-03-12
내용 : 쿠버네티스 전 알아야 할 지식 <br>

1. [가상머신](#가상머신)
2. [클라우드](#클라우드)
3. [Paas](#Paas)
4. [Docker](#Docker)
5. [컨테이너 오케스트레이션](#Container-오케스트레이션)
-----
**현재까지 흐름**
![](./img/before.png)

### ex
![ex](./img/before1.png)

이러한 배포 단계에 문제점은 항상 다음 단계로 이동할때 명령어를 사용함
중간에 버전 하나만 달라져도 종속된 모든 것에 문제가 발생함

**어려운 형상관리**
- 서버를 누가 언제 어떻게 작업했는지?
- 메뉴얼을 믿을 수 있을까?
- 똑같은 서버를 하나 더 만들 수 있을까?


해결하기 위해 **설정관리도구 (Configuration Management)** 가 생김
상태를 관리하는 코드를 이용하여 관리, 선언적 서버 상태 정의 (최대한 명령어를 줄이도록) --> yml 파일과 비슷한 느낌 <br>
따라서 불완전하지만 서버를 재현 가능함.

**하지만 이또한 복잡하고 어려움**

#### 가상머신
**가상머신**의 등장

- 하나의 서버에 여러개의 가상 서버를 설치할 수 있음
- 서버의 상태를 이미지로 저장할 수 있음
- 새로운 서버를 만들고 기존 서버 내용을 복사 할 수 있음

특징 : Immutable(변하지 않는)
- 서버에 설치된 애플리케이션을 업데이트 하면 mutable
- 새로운 버전이 설치된 서버의 상태를 이미지로 만들어 교체하면 Immutable
- 생각보다 어렵고 특정 회사 제품을 사용해야함

#### 클라우드
**클라우드** 의 등장
- 하드웨어 파편화 문제 해결
- 이미지를 기반으로한 서버 상태관리 but 서버 운영 문제는 여전함
- 편리

단점
1. 어떻게 만들어지는지 모름 (결과만 확인하기 때문)
2. 처음부터 다시 만들기 어려움
3. 관리가 어려움

#### Paas
**PaaS (platform as a service)** 의 등장
- 서버를 운영하는 자체가 어려울때
- 소스 코드만으로 배포가 가능함

단점
1. Paas 방식에 맞게 작성해야함
2. 서버에 대한 접속을 지원하지 않음
3. 서버에 파일 시스템 또한 x

#### Docker
**Docker의 등장**

- 리눅스 커널의 여러 기술 활용
- Paas 와 같은 제한 없음
- 훨씬 가볍고 간단함
- 클라우드 이미지 보다 관리하기 쉬움
- 오픈소스 -> 특정 회사에 종속 x

- 특징
1. 표준성
2. 이미지
3. 설정(환경변수로 제어)
4. 자원 - 컨테이너를 내리면 없어짐
![](./img/struce.png)


docker-gen : docker의 기본 기능을 활용한 service discovery 도구

---------
### Container 오케스트레이션

여러 대의 서버와 여러 개의 서비스를 편리하게 관리해주는 작업

**도커 같은 경우는 여러개를 관리하는 기능은 지원하지 않고 다른 서드파티에서 지원했음**

용어

    스케줄링 : 컨테이너를 적당한 서버에 할당해주는 작업
    클러스터링 : 여러 개의 서버를 하나의 서버처럼 사용
    서비스 디스커버리 : 서비스를 찾아주는 기능
        
        
대표적 도구
docker swarm 과 **kubernetes**

1. Docker Swarm
- docker 에서 만든 오케스트레이션 도구
- 호스트 os에 Agent만 설치하면 간단하게 작동하고 빠름
- 단순 구조에 효과적

2. kubernetes 
- 구글에서 개발한 컨테이너 배포, 확장, 운영도구
- 사실상 표준
- 대규모에 적합
- 다양한 생태계 구축


참고자료(출처) 

[T아카데미](https://tacademy.skplanet.com/live/player/onlineLectureDetail.action?seq=162)




 